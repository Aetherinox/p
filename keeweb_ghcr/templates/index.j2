<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <title>Keeweb ghcr.io badge generation</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="description" content="ghcr.io status badge generator for gitHub container registry">
        <meta name="format-detection" content="telephone=no">
        <link rel="icon" href="/static/favicon.ico">
        <link rel="apple-touch-icon" href="/static/favicon.png">
        <meta property="og:site_name" content="keeweb-ghcr">
        <meta property="og:url" content="https://keeweb-ghcr.egpl.dev">
        <meta property="og:type" content="website">
        <meta property="og:title" content="keeweb-ghcr">
        <meta property="og:description" content="ghcr.io status badge generator for gitHub container registry">
        <meta property="og:image" content="https://keeweb-ghcr.egpl.dev/static/favicon.png">
        <meta property="og:image:width" content="160">
        <meta property="og:image:height" content="160">
        <meta property="og:locale" content="en_US">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@egpl0">
        <meta name="twitter:description" content="ghcr.io status badge generator for gitHub container registry">
        <meta name="twitter:image:src" content="https://keeweb-ghcr.egpl.dev/static/favicon.png">
        <script>
            const do_UpdateImages = (targetId) => {
                const owner = encodeURIComponent(document.getElementById("owner").value);
                const name = encodeURIComponent(document.getElementById("name").value);
                if (!(owner || name)) return;
                const imgElms = document.querySelectorAll("main > a > img");
                Array.from(imgElms).filter((e) => targetId === undefined || targetId === e.id).forEach((e) => {
                    const url = new URL(`${window.location.origin}/${owner}/${name}/${e.id}`);
                    const optionElms = document.querySelectorAll(`div[id="${e.id}-options"] > input`);
                    Array.from(optionElms).forEach((o) => {
                        url.searchParams.set(o.className, o.value);
                    });
                    const urlString = url.toString();
                    e.src = urlString;
                    document.getElementById(`${e.id}-link`).href = urlString;
                });
            };
            window.onload = (_event) => do_UpdateImages(undefined);
        </script>
        <style>
            body {
                margin: 0;
                padding: 0;
                text-align: center;
                background-color: #202020;
                color: #FFF;
                font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
            }

            header {
                background-color: #0d0d0d;
                margin: 0;
                padding: 0;
                position: sticky;
                top: 0;
                height: 64px;
                align-content: center;
            }

            h1 {
                font-weight: 100;
                margin: 0;
            }

            hr {
                border-bottom: 1px dotted rgb(106.5, 106.5, 107);
                border-left: 0;
                border-right: 0;
                border-top: 0;
                margin-top: 30px;
                margin-bottom: 30px;
            }

            main>h2 {
                margin-block: 20px
            }

            main>img {
                margin-bottom: 10px
            }

            .container-top {
                background-color: #222;
                height: 80px;
                align-content: center;
                border-top: 1px dotted #808080;
                border-bottom: 1px dotted #808080;
                padding: 0px;
                margin: 0px;
            }

            main>div.options>input[type="text"] {
                width: 70px
            }

            main>div.options>input[type="number"] {
                width: 35px
            }

            footer>span {
                display: inline-block;
                vertical-align: middle;
            }

            label {
                padding-left: 20px;
            }

            input[type="number"] {
                padding-top: 5px;
                padding-bottom: 5px;
                padding-left: 10px;
                padding-right: 7px;
                border: 1px solid #313131;
                background-color: #171717;
            }

            input[type="number"]:focus-visible {
                border: 1px solid #DF094F;
                outline: none;
            }

            input[type="text"] {
                background-color: #171717;
                border: 1px solid #313131;
                font-weight: 100;
                padding-top: 5px;
                padding-bottom: 5px;
                padding-left: 10px;
                padding-right: 10px;
            }

            input[type="text"]:focus-visible {
                border: 1px solid #DF094F;
                outline: none;
            }

            input[type="color"] {
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                background-color: transparent;
                width: 30px;
                height: 30px;
                border: none;
                cursor: pointer;
                position: fixed;
                margin-right: 15px;
                margin-top: 0px;
                margin-left: -20px;
            }

            input[type="color"]::-moz-color-swatch {
                border-radius: 20px;
                border: none;
            }

            input[type="color"]:focus-visible {
                border: 1px solid #DF094F;
                outline: none;
            }

            input[type="color"]:hover {
                cursor: pointer;
            }

            .grouping {
                height: 45px;
                align-content: center;
                padding-top: 20px;
            }

            footer {
                background-color: #0f0f0f;
                padding-top: 20px;
                padding-bottom: 20px;
                bottom: 0;
                position: absolute;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>ghcr.io Badge Generator</h1>
        </header>
        <main>
            <hr>
            <div> ghcr.io/ <input type="text" id="owner" placeholder="owner" value="keeweb" required> / <input type="text" id="name" placeholder="name" value="keeweb-ghcr" required>
                <button type="submit" onclick="do_UpdateImages(undefined)">Generate</button>
            </div>
            <hr>
            <h2>tags</h2>
            <a id="tags-link">
                <img alt="tags-badge" id="tags" src="data:,">
            </a>
            <div class="form__group field options grouping" id="tags-options">
                <input type="color" name="color" class="color" id="tags-color" value="#44cc11"> <label for="tags-ignore">ignore:</label>
                <input type="text" name="ignore" class="ignore" id="tags-ignore" value="latest"> <label for="tags-n">n:</label>
                <input type="number" name="n" class="n" id="tags-n" value="3" min="1"> <label for="tags-label">label:</label>
                <input type="text" name="label" class="label" id="tags-label" value="image tags"> <label for="tags-trim">trim:</label>
                <input type="text" name="trim" class="trim" id="tags-trim" value="">
                <button type="submit" onclick="do_UpdateImages('tags')">Apply</button>
            </div>
            <hr>
            <h2>latest_tag</h2>
            <a id="latest_tag-link">
                <img alt="latest_tags-badge" id="latest_tag" src="data:,">
            </a>
            <div class="options grouping" id="latest_tag-options">
                <input type="color" name="color" class="color" id="latest_tag-color" value="#44cc11"> <label for="latest_tag-ignore">ignore:</label>
                <input type="text" name="ignore" class="ignore" id="latest_tag-ignore" value="latest"> <label for="latest_tag-label">label:</label>
                <input type="text" name="label" class="label" id="latest_tag-label" value="version"> <label for="latest_tag-trim">trim:</label>
                <input type="text" name="trim" class="trim" id="latest_tag-trim" value="">
                <button type="submit" onclick="do_UpdateImages('latest_tag')">Apply</button>
            </div>
            <hr>
            <h2>size</h2>
            <a id="size-link">
                <img alt="size-badge" id="size" src="data:,">
            </a>
            <div class="options grouping" id="size-options">
                <input type="color" name="color" class="color" id="size-color" value="#44cc11"> <label for="size-tag">tag:</label>
                <input type="text" name="tag" class="tag" id="size-tag" value="latest"> <label for="size-label">label:</label>
                <input type="text" name="label" class="label" id="size-label" value="image size"> <label for="size-trim">trim:</label>
                <input type="text" name="trim" class="trim" id="size-trim" value="">
                <button type="submit" onclick="do_UpdateImages('size')">Apply</button>
            </div>
            <hr>
        </main>
        <footer>
            <span>
                <a href="{{ repo_link }}" target="_blank">keeweb/keeweb-ghcr</a> / v{{ version }}
            </span>
        </footer>
    </body>